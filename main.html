<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!--
/**
 * @license
 * MyFonts Webfont Build ID 3798184, 2019-08-17T17:15:35-0400
 * 
 * The fonts listed in this notice are subject to the End User License
 * Agreement(s) entered into by the website owner. All other parties are 
 * explicitly restricted from using the Licensed Webfonts(s).
 * 
 * You may obtain a valid license at the URLs below.
 * 
 * Webfont: MuseoSans-500 by exljbris
 * URL: https://www.myfonts.com/fonts/exljbris/museo-sans/500/
 * Copyright: Copyright (c) 2008 by Jos Buivenga. All rights reserved.
 * Licensed pageviews: Unlimited
 * 
 * 
 * License: https://www.myfonts.com/viewlicense?type=web&buildid=3798184
 * 
 * © 2019 MyFonts Inc
*/

-->
	<link rel="stylesheet" type="text/css" href="../CarInsurance/MyFontsWebfontsKit/MyFontsWebfontsKit.css">
	<link rel="stylesheet" type="text/css" href="../CarInsurance/style.css">
	<!--<script type="text/javascript" src="../CarInsurance/script.js"></script>-->

	<title>Kjøp Bilforsikring</title>
</head>

<body>

<div class="container">

	<div class="intro">
	<h1>Kjøp bilforsikring</h1>
	<p>Lorem ipsum dolor sit amet, an numquam eligendi delicata vel. Velit ubique persequeris mea eu, vel et populo quidam hendrerit. Eam virtute impedit comprehensam an, ad sale incorrupte pro. Purto habemus electram in mea. His dicta detracto ex, oblique pericula interesset vis at.</p>
	</div>
		<form id="myForm">
			<div class="input-carsign">
			<div class="input-field">
				<label for="carSign">Bilens registreringsnummer</label>
				<input type="text" name="Registreringsnummer" placeholder="AB 12345" id="carSign" maxlength="7" onfocusout="validateCarSign()">
				<span class="helper-text"></span>
			</div>

			</div>

			<div class="div-info">
			<button type="button" onclick="infoButton()" id="infoBtn" name="i">i</button>
			</div>

			<div class="input-bonus">
			<div class="input-field">
				<label for="bonus">Din bonus</label>
				<select name="Bonus" id="bonus">
					<option value="default">Velg din bonus</option>
					<option value="75">75%</option>
					<option value="70">70%</option>
					<option value="60">60%</option>
					<option value="50">50%</option>
					<option value="40">40%</option>
					<option value="30">30%</option>
					<option value="20">20%</option>
					<option value="10">10%</option>
					<option value="0">Ingen bonus</option>
					<option value="0">Min første bil</option>
					<option value="0">Usikker/Husker ikke</option>
				</select>
			</div>
			</div>
			<div id="showInfo">Bonus er en belønning du får for skadefri kjøring. Høyere bonus gir lavere pris på bilforsikringen.</div>

			<div class="input-birth">
			<div class="input-field">
				<label for="dateOfBirth">Fødselsnummer</label>
				<input type="text" name="Fødselsnummer" placeholder="DDMMÅÅ" id="dateOfBirth" maxlength="6" onfocusout="validateDateOfBirth()">	
				<span class="helper-text"></span>
			</div>
			</div>

			<div class="input-name">
			<div class="input-field">
				<label for="firstName">Fornavn</label>
				<input type="text" name="Fornavn" id="firstName" onfocusout="validateFirstName()"/>
				<span class="helper-text"></span>
			</div>
			<div class="input-field">
				<label for="lastName">Etternavn</label>
				<input type="text" name="Etternavn" id="lastName" onfocusout="validateLastName()"/>
				<span class="helper-text"></span>
			</div>
			</div>

			<div class="input-email">
			<div class="input-field">
				<label for="email">Epost</label>
				<input type="email" name="Epost" id="email" onfocusout="validateEmail()"/>
				<span class="helper-text"></span>
			</div>
			</div>

			<div class="buttons">
			<button type="submit" id="button-submit" onclick="validateForm()">Beregn pris</button>
			<button type="cancel" id="button-cancel">Avbryt</button>
			</div>
		</form>

</div>

<footer>Copyright() Frida Thorkildsen Solhaug</footer>

<script type="text/javascript">
	// Input field initialization
	var carSign = document.getElementById('carSign');
	var bonus = document.getElementById('bonus');
	var dateOfBirth = document.getElementById('dateOfBirth');
	var firstName = document.getElementById('firstName');
	var lastName = document.getElementById('lastName');
	var email = document.getElementById('email');

	// Form initialization
	var myForm = document.getElementById('myForm');

	// Error color
	var red = '#F44336';

	//Handle form
	// not working
	/*function calculatePrice(){
		myForm.addEventListener('submit', function(event)){
		// Prevent default behaviour
		event.preventDefault();
		if(
			validateCarSign() &&
			validateDateOfBirth() &&
			validateFirstName() && 
			validateFirstName() && 
			validateEmail()
		) {
			var name = firstName.value;
			var container = document.querySelector('div.container');

			setTimout(function(){
				var text = document.createElement('span');
				text.appendChild(document.createTextNode('Beregnet forsikringspris for din bil er 5000kr')) 
			}, 1000);
		}
	} 
}*/


	// VALIDATORS
	function validateCarSign(){
		// check if empty
		if(checkIfEmpty(carSign)) return;
		// check if exactly two letters and five numbers
		if(checkCarSign(carSign)) return;
		return true;
	}
	function validateBonus(){
		// check if default dropdown is chosen
		// not working
		if(bonus !== 'default') return;
		return true;
	}
	function validateDateOfBirth(){
		if(checkIfEmpty(dateOfBirth)) return;
		// check if only numbers
		if(checkIfOnlyNumbers(dateOfBirth)) return;
		return true;
	}
	function validateFirstName(){
		if(checkIfEmpty(firstName)) return;
		// check if only letters
		if(checkIfOnlyLetters(firstName)) return;
		return true; // returns 'true' if not contain letters
	}
	function validateLastName(){
		if(checkIfEmpty(lastName)) return;
		if(checkIfOnlyLetters(lastName)) return;
		return true;
	}
	function validateEmail(){
		if(checkIfEmpty(email)) return;
		// checks if normal email
		if(checkEmail(email)) return;
		return true;
	}

	// UTILITY FUNCTIONS
	function checkIfEmpty(field) {
		if(isEmpty(field.value.trim())){
			// set field invalid
			setInvalid(field, `${field.name} kan ikke være blank`);
			return true;
		} else {
			// set field valid
			setValid(field);
			return false;
		}
	}
	function isEmpty(value){
		if(value === '') return true;
		return false;
	}
	function setInvalid(field, message){
		field.className = 'invalid';
		field.nextElementSibling.innerHTML = message;
		field.nextElementSibling.style.color = red;
	}
	function setValid(field){
		field.className = 'valid';
		field.nextElementSibling.innerHTML = '';
	}
	// checks for exactly two letters and five numbers
	function checkCarSign(field){
		if(/[a-zA-Z\æøåÆØÅ]{2}\d{5}/.test(field.value)){
			setValid(field);
			return true;
		} else{
			setInvalid(field, 'Ugyldig registreringsnummer');
			return false;
		}
	}
	// any input beside numbers is invalid
	function checkIfOnlyNumbers(field){
		if(/^[0-9]+$/.test(field.value)){
			setValid(field);
			return true;
		} else {
			setInvalid(field, `${field.name} kan ikke inneholde bokstaver`);
			return false;
		}
	}
	// any input beside letters is invalid
	function checkIfOnlyLetters(field){
		if(/[a-zA-Z\æøåÆØÅ]/.test(field.value)){
			setValid(field);
			return true;
		} else {
			setInvalid(field, `${field.name} kan ikke inneholde tall`);
			return false;
		}
	}
	// checks if email is valid
	function checkEmail(field){
		if(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(field.value)){
			setValid(field);
			return true;
		} else {
			setInvalid(field, 'Ugyldig epostadresse');
			return false;
		}
	}

	// Information button on bonus
	function infoButton(){
		var showInfo = document.getElementById('showInfo');
		if(showInfo.style.display === "block"){
			showInfo.style.display = "none";
		} else {
			showInfo.style.display = "block";
		}
	}
</script>
</body>
</html>